# Plugin prompt templates (domain-specific)
[agents.training.generators.oracle_generator]
prompt = """You are an expert ROM hacker specializing in SNES and ALTTP modifications. Generate high-quality training data for this Oracle-of-Secrets ROM hack routine.

ROUTINE: {name}
CATEGORY: {category}
HOOK STATUS: {hook_status}
{hooks_vanilla_line}

CONTEXT:
{context}

CODE:
```asm
{code}
```
{hook_emphasis}

Generate a JSON object with:

1. "instruction": A clear question about this ROM hack technique. Make it pedagogical and varied:
   - Ask about implementation of specific ROM hack features
   - Request explanation of hooking/patching techniques
   - Ask about vanilla vs hack behavior differences
   - Request guidance on adding similar custom content

2. "input": Technical context (2-3 sentences):
   - Vanilla behavior being modified (if hook)
   - ROM bank and address information
   - Related routines in call graph
   - Technical constraints or requirements

3. "output": Comprehensive ROM hacking tutorial (200-350 words) covering:

   **Functionality Overview:**
   - What this routine accomplishes in the game
   - Player-visible changes or new features
   - Integration with existing game systems

   **ROM Hacking Technique (REQUIRED):**
   - If HOOK: Which vanilla routine at what address ($XX:XXXX)
   - If HOOK: Original behavior vs modified behavior
   - Code injection method (org directive, pushpc/pullpc, JSL redirect)
   - Bank allocation strategy (expanded banks $20-$FF)
   - Why this approach was chosen

   **Implementation Details:**
   - Line-by-line code analysis with assembly explanations
   - Hardware register usage (PPU: $21XX, CPU: $42XX)
   - RAM variable allocation ($7E:XXXX, $7F:XXXX)
   - Timing considerations and NMI/IRQ handling

   **Integration & Testing:**
   - How it integrates with other hack components
   - Common pitfalls when implementing similar features
   - Testing approach and potential bugs

QUALITY REQUIREMENTS:
- Use precise 65816 assembly terminology and syntax
- Specify exact addresses for ROM ($XX:XXXX), RAM ($7E:XXXX), and registers ($21XX)
- Explain vanilla behavior BEFORE explaining modifications
- Include concrete examples and code snippets
- Teach the ROM hacking technique, not just describe it
- Maintain coherent narrative flow between sections

EXAMPLE OUTPUT (for a hook):
```
The OracleCustomSpriteLoader routine is a hook that replaces vanilla ALTTP's sprite loading logic at $0D:B4E0.

**Vanilla Behavior:** The original game loads sprite graphics from banks $09-$0B using a simple index lookup.

**Modified Behavior:** Oracle redirects this to bank $32 (custom sprite bank) using:
```asm
org $0DB4E0
    JSL OracleCustomSpriteLoader  ; Jump to bank $32
    NOP #3                        ; Fill remaining bytes
```

The custom routine (shown above) expands sprite variety from 128 to 256 by using both the sprite ID and room number...

[Continue with detailed line-by-line explanation]
```

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.training.generators.gigaleak_generator]
prompt = """You are an expert at Nintendo SNES development and ALTTP ROM hacking. Generate high-quality training data from this original Nintendo source code symbol.

SYMBOL: {name}
TYPE: {symbol_type}
CONTEXT:
{context}

Generate a JSON object with:

1. "instruction": A clear, specific question about this symbol. Make it natural and varied:
   - Ask about technical purpose and implementation
   - Ask about relationship to game mechanics or hardware
   - Ask about Japanese-to-English translation context
   - Ask about modern ROM hacking usage

2. "input": Context snippet (1-2 sentences). Use format:
   "Source File: {{file}} (line {{line}}); Context: {{brief_description}}"

3. "output": A comprehensive technical explanation (150-300 words) covering:

   **Technical Purpose (REQUIRED):**
   - What this symbol represents (variable, constant, routine, label)
   - Technical function in the game engine or hardware interface
   - Memory location, register usage, or data structure details

   **Japanese Context (if present):**
   - Original Japanese comment: {{japanese}}
   - English translation: {{english}}
   - Cultural or naming conventions insight

   **Modern ROM Hacking Connection:**
   - How modern disassemblies reference this (e.g., usdasm symbol {{modern_name}})
   - RAM address mappings (format: $7E:XXXX)
   - Common modifications or usage in ROM hacks

   **Code Analysis (if code context provided):**
   - Line-by-line explanation of assembly operations
   - Hardware registers accessed (PPU: $21XX, CPU: $42XX, APU: $2140-$2143)
   - Timing or performance considerations

QUALITY REQUIREMENTS:
- Be technically precise with addresses, opcodes, and register names
- Use proper 65816 assembly terminology (LDA, STA, JSL, etc.)
- Include specific examples and concrete details
- Maintain coherent flow between sections
- Avoid vague statements - be specific

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.training.generators.asm_generator]
prompt = """You are an expert SNES 65816 assembly programmer specializing in Zelda: A Link to the Past. {instruction_prefix}.

ROUTINE: {name}
BANK: {bank}
DESCRIPTION: {description}
MEMORY ACCESS: {memory_context}
ADDRESS: {address}

CODE:
```asm
{code}
```

Generate a JSON object with:

1. "instruction": A clear, technical request for this assembly code. Make it specific and varied:
   - Request code for a specific game mechanic or system
   - Ask for optimization of a particular routine
   - Request implementation of hardware interaction
   - Ask for a routine that manipulates specific RAM/registers

2. "input": Technical context (2-3 sentences) that would help write this code:
   - RAM addresses used (format: $7E:XXXX)
   - Hardware registers accessed (PPU: $21XX, CPU: $42XX, APU: $2140-$2143)
   - Key variables or constants referenced
   - Any constraints (timing, register preservation, etc.)

3. "output": The complete assembly routine with inline explanations:
   ```asm
   {name}:
       ; [Brief overview of what this routine does]
       [Code with line-by-line comments explaining:]
       - What each instruction does
       - Why specific registers are used
       - Memory addresses and their purpose
       - Control flow logic (branches, loops)
       - Hardware timing considerations
   ```

QUALITY REQUIREMENTS:
- Use proper 65816 syntax and mnemonics (LDA, STA, JSL, RTL, PHP, PLP, etc.)
- Include all addressing modes correctly (.b for 8-bit, .w for 16-bit, # for immediate)
- Explain hardware register access with full addresses ($2100-$21FF PPU, $4200-$43FF CPU)
- Add meaningful comments that explain WHY, not just WHAT
- Maintain consistent code formatting and indentation
- Be technically precise about bank ($00-$FF), RAM ($0000-$1FFF, $7E:0000-$7F:FFFF), and ROM addresses

EXAMPLE OUTPUT FORMAT:
```asm
LoadPlayerState:
    ; Load Link's current state flags from WRAM
    LDA.w $0E20        ; Load player state byte ($7E:0E20)
    AND.b #$1F         ; Mask lower 5 bits (state index 0-31)
    STA.b $00          ; Store in direct page temp variable
    RTS                ; Return to caller
```

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.training.generators.cpp_generator]
prompt = """I will give you a C++ {kind} from the yaze project (a SNES emulator and ROM editor for Zelda: A Link to the Past).
Your task is to {task_prefix}.

CODE TYPE: {kind}
SIGNATURE: {signature}
FILE: {source}
CONTEXT:
{context}

CODE:
```cpp
{code}
```

Respond with a JSON object containing:
1. "instruction": A natural language request that would lead to writing this code. Be specific about what it does.
2. "input": Any necessary context (APIs, dependencies, constraints). Leave empty if self-contained.
3. "output": The C++ code exactly as provided.

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.training.generators.zelda3_generator]
prompt = """You are an expert SNES 65816 assembly programmer specializing in Zelda: A Link to the Past. {instruction_prefix}.

This is from the zelda3 vanilla disassembly project - fully labeled, production-quality Nintendo code.

ROUTINE: {label}
CONTEXT:
{context}

CODE:
```asm
{code}
```

Generate a JSON object with:

1. "instruction": A clear, specific request for this assembly code. Vary the perspective:
   - Explain what this vanilla ALTTP routine does
   - Ask how to implement this game mechanic
   - Request optimization or alternative approaches
   - Ask about hardware/timing considerations
   - Request step-by-step breakdown

2. "input": Technical context (2-3 sentences):
   - What game system/feature this routine belongs to
   - RAM addresses or hardware registers used
   - Timing constraints or NMI/IRQ considerations
   - Related routines in the call graph

3. "output": Complete explanation with the assembly code:
   - Brief overview of what the routine accomplishes
   - Line-by-line code with explanations
   - Why specific registers/addressing modes are used
   - How it fits into the larger game system
   - Edge cases or special handling

QUALITY REQUIREMENTS:
- Use precise 65816 syntax and mnemonics
- Include full addresses ($7E:XXXX for RAM, $XX:XXXX for ROM)
- Explain WHY specific techniques are used (not just WHAT)
- Reference Nintendo's original design intent where apparent
- Maintain technical accuracy about SNES hardware

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.training.generators.documentation_generator]
prompt = """You are an expert ROM hacker and technical writer. {instruction_prefix}.

This is from {source} documentation - educational content about SNES ROM hacking and ALTTP modding.

SECTION: {section}
CONTEXT:
{context}

CONTENT:
{content}{code_section}

Generate a JSON object with:

1. "instruction": A clear question or request based on this documentation. Vary the approach:
   - Ask how to implement a technique described in the doc
   - Request explanation of a ROM hacking concept
   - Ask for step-by-step tutorial on a topic
   - Request code example for a technique
   - Ask about best practices or common pitfalls

2. "input": Context for the question (1-2 sentences):
   - What ROM hacking task or goal this addresses
   - What knowledge is assumed (beginner/intermediate/advanced)
   - Any specific constraints or requirements

3. "output": Tutorial-style explanation (200-400 words):
   - Clear explanation of the concept/technique
   - Step-by-step instructions if applicable
   - Code examples with explanations
   - Best practices and common pitfalls
   - Related techniques or further reading

QUALITY REQUIREMENTS:
- Maintain pedagogical, tutorial tone
- Use concrete examples and code snippets
- Explain WHY techniques work, not just HOW
- Reference vanilla ALTTP behavior when relevant
- Include practical tips from experience

JSON FORMAT:
{{
  "instruction": "...",
  "input": "...",
  "output": "..."
}}
"""

[agents.utility.prompt_engineer]
prompt = """You are a Staff Engineer creating a task for a junior engineer or an AI agent.
TASK: Convert the following 'Deep Context Report' into a clear, actionable development prompt.
The prompt should focus on the 'Action Items' and 'Critique & Gaps' sections of the report.

FORMAT:
## Goal
<A one-sentence summary of the task.>

### Key Files
<List the most important file paths mentioned in the report.>

### Instructions
<A numbered list of steps to take. Be specific.>

### Acceptance Criteria
<How to verify the task is complete.>

--- DEEP CONTEXT REPORT ---
{report_content}
--- END REPORT ---

Output ONLY the generated prompt content."""

[agents.utility.visualizer]
prompt = """Create a Mermaid.js diagram representing the following system context.
FOCUS: {focus}

CONTEXT:
{context}

OUTPUT FORMAT:
Return ONLY the mermaid code block."""

[agents.knowledge.graph]
extract_prompt = """Analyze the following documentation file: '{filename}'
TASK: Extract a Knowledge Graph (Nodes and Edges) representing the system architecture and work streams.

RULES for ENTITIES (Nodes):
1. **Core Concepts**: High-level systems (e.g., 'Database', 'API Gateway', 'Auth Service'). Normalize names for consistency.
2. **Artifacts**: Specific Issue IDs (#123), Code Reviews (PR 123), File Paths (src/path).
3. **Agents/People**: Users or Agents mentioned.

RULES for RELATIONSHIPS (Edges):
1. Use strong verbs: 'blocks', 'implements', 'deprecates', 'documents', 'tests'.
2. Link the Document itself ('{filename}') to the concepts it describes.

OUTPUT FORMAT (JSON):
{{
  "nodes": [
    {{"id": "Canonical Name", "type": "CORE_CONCEPT|ISSUE|REVIEW|FILE_PATH", "meta": {{"description": "..."}}}}
  ],
  "edges": [
    {{"source": "Node A", "target": "Node B", "relation": "blocks"}}
  ]
}}
Output ONLY valid JSON.

TEXT CONTENT:
{text}"""

[agents.training.augmentation]
prompt = """You are rewriting a training sample to increase diversity while preserving technical content.

DOMAIN: {domain_desc}

ORIGINAL SAMPLE:
Instruction: {original_instruction}
Input: {original_input}
Output: {original_output}...

AUGMENTATION TASK:
{augmentation_instructions}

CRITICAL REQUIREMENTS:
1. PRESERVE ALL TECHNICAL CONTENT - same code, same addresses, same registers, same logic
2. CHANGE ONLY the phrasing, presentation style, and explanation approach
3. The augmented version should have DIFFERENT EMBEDDINGS but IDENTICAL technical information
4. Maintain coherence between instruction, input, and output

Generate a JSON object with the augmented version:

{{
  "instruction": "Rewritten instruction from {augmentation_value} perspective",
  "input": "Rewritten input context",
  "output": "Rewritten output with same technical content, different presentation"
}}

JSON FORMAT ONLY - no additional text.
"""

[agents.training.augmentation.instructions.perspective]
beginner = """Rewrite for a BEGINNER audience:
- Use simpler language and explain jargon
- Add step-by-step explanations
- Explain WHY things work, not just WHAT they do
- Add helpful context about SNES/ROM hacking basics"""
expert = """Rewrite for an EXPERT audience:
- Use precise technical terminology
- Assume advanced knowledge of SNES hardware and ROM hacking
- Focus on advanced techniques and optimizations
- Reference production-quality patterns and best practices"""
reference = """Rewrite as CONCISE API REFERENCE:
- Use terse, documentation-style language
- Focus on facts: what it does, parameters, return values
- Minimal explanations, maximum information density
- Use bullet points and structured format"""
tutorial = """Rewrite as STEP-BY-STEP TUTORIAL:
- Break down into clear numbered steps
- Explain each step's purpose before showing code
- Add 'why' explanations for each decision
- Include learning objectives and takeaways"""

[agents.training.augmentation.instructions.tone]
formal = """Rewrite in FORMAL academic/professional tone:
- Use proper grammar and complete sentences
- Avoid contractions and casual language
- Use passive voice where appropriate
- Professional technical writing style"""
conversational = """Rewrite in CONVERSATIONAL friendly tone:
- Use contractions and casual language
- Address the reader directly ("you")
- Add friendly asides and encouragement
- Keep it approachable and helpful"""
terse = """Rewrite in TERSE minimal style:
- Short sentences, minimal words
- Cut all unnecessary explanations
- Focus on essential information only
- Code-comment style annotations"""
verbose = """Rewrite in VERBOSE detailed style:
- Elaborate explanations with full context
- Multiple perspectives on each concept
- Thorough coverage of edge cases
- Rich descriptive language"""
urgent = """Rewrite with URGENT troubleshooting tone:
- Emphasize immediacy and action
- Use short, direct sentences
- Highlight critical steps
- Focus on resolving the issue quickly"""
playful = """Rewrite with LIGHT playful tone:
- Add mild humor while staying professional
- Use engaging, friendly language
- Keep technical accuracy intact
- Avoid excessive jokes or fluff"""

[agents.training.augmentation.instructions.complexity]
simple = """Rewrite at SIMPLE complexity:
- Reduce technical detail to essentials
- Use high-level summaries
- Avoid deep implementation details
- Focus on core concept"""
intermediate = """Rewrite at INTERMEDIATE complexity:
- Balance detail and clarity
- Explain key mechanisms without overwhelming
- Use some technical terms with brief explanations
- Provide enough detail for practical use"""
advanced = """Rewrite at ADVANCED complexity:
- Include low-level details and edge cases
- Use technical terminology without simplification
- Discuss performance, trade-offs, and pitfalls
- Assume reader can follow deep technical discussion"""

[agents.training.augmentation.instructions.context]
vanilla = """Rewrite emphasizing VANILLA behavior:
- Focus on how the original game works
- Reference baseline routines and data
- Keep modifications minimal in explanation"""
romhack = """Rewrite emphasizing ROM HACKING context:
- Highlight the modification points and hooks
- Mention bank/ROM layout considerations
- Emphasize integration with other hacks"""
debug = """Rewrite as DEBUGGING assistance:
- Focus on diagnosing issues and verification
- Provide checks and validation steps
- Highlight common failure modes"""
dungeon = """Rewrite with DUNGEON game context:
- Frame examples in terms of dungeon rooms, enemies, items
- Reference dungeon-specific mechanics
- Use dungeon scenarios for explanations"""
overworld = """Rewrite with OVERWORLD game context:
- Frame examples in terms of map navigation, NPCs, exploration
- Reference overworld mechanics
- Use overworld scenarios for explanations"""
menu = """Rewrite with MENU/UI game context:
- Frame examples in terms of menus, inventory, HUD
- Reference UI/menu mechanics
- Use menu interaction scenarios"""
hardware = """Rewrite with HARDWARE focus:
- Emphasize PPU/CPU/DMA interactions
- Reference hardware timing and constraints
- Use hardware architecture perspective"""
